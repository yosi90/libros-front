<div class="h-100 p-4">
    <mat-card class="p-3">
        <form [formGroup]="fgBook" (submit)="addBook()">
            <mat-form-field appearance="outline" primary class="w-100 mt-3 mb-2">
                <mat-label class="ms-3">TÃ­tulo del libro</mat-label>
                <input matInput class="ms-3" formControlName="title"
                    (blur)="updateTitleErrorMessage()" required>
                <mat-icon matTextPrefix>book</mat-icon>
                @if (title.invalid) {
                <mat-error align="start">{{errorTitleMessage}}</mat-error>
                }
                <mat-hint align="end">{{ title.value ? title.value.length : 0 }} / 30</mat-hint>
            </mat-form-field>
            
            <!-- <mat-form-field appearance="outline" class="w-100 mb-3">
                <mat-label>Universo</mat-label>
                <input type="text" aria-label="Universo" matInput [formControl]="universe"
                    [matAutocomplete]="autoUniverses">
                <mat-autocomplete #autoUniverses="matAutocomplete">
                    @for (option of filteredUniverses | async; track option) {
                    <mat-option [value]="option">{{option}}</mat-option>
                    }
                </mat-autocomplete>
                <mat-icon matTextPrefix class="me-3">grain</mat-icon>
                @if (universe.invalid) {
                <mat-error align="start">{{errorUniverseMessage}}</mat-error>
                }
            </mat-form-field>
            <mat-form-field appearance="outline" class="w-100 mb-3">
                <mat-label>Autor</mat-label>
                <input type="text" aria-label="Autor" matInput [formControl]="author"
                    [matAutocomplete]="autoAuthors">
                <mat-autocomplete #autoAuthors="matAutocomplete">
                    @for (option of filteredAuthors | async; track option) {
                    <mat-option [value]="option">{{option}}</mat-option>
                    }
                </mat-autocomplete>
                <mat-icon matTextPrefix class="me-3">record_voice_over</mat-icon>
                @if (author.invalid) {
                <mat-error align="start">{{errorAuthorMessage}}</mat-error>
                }
            </mat-form-field> -->

            <div class="position-relative">
                <button mat-raised-button [disabled]="fgBook.invalid || waitingServerResponse">
                    Confirmar registro
                    <mat-icon>border_color</mat-icon>
                </button>
                @if (waitingServerResponse) {
                <div class="spinner-wrapper">
                    <ngx-loading [show]="waitingServerResponse" [config]="spinnerConfig"></ngx-loading>
                </div>
                }
            </div>
        </form>
    </mat-card>
</div>